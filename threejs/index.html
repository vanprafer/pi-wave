<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="img/favicon.png" type="image/png">
		<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
		<link rel="stylesheet" type="text/css" href="style.css">
		<meta charset="utf-8">
		<title>Î -Wave</title>
        <script src="lib/math.js"></script>
		<script src="lib/jquery-1.12.4.min.js"></script>
		<script src="lib/jquery-ui.min.js"></script>
		<script src="lib/wavesurfer.min.js"></script>
		<script src="lib/wavesurfer.spectrogram.min.js"></script>
        <script src="lib/noise.js"></script>
		<script src="modelado.js" type="module"></script>
	</head>
	<body>
		<div class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -4 13 20">
                <path d="M 0 0 L 1 0 L 1 -3 L 4 -3 L 4 0 L 11 0 L 11 -1 L 12 1 L 12 0 L 13 0" stroke="#5d005c"
                    stroke-width="0.55" fill="none" />
            </svg>

			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -4 13 20">
                <path d="M 0 0 L 1 0 L 1 -3 L 4 -3 L 4 0 L 11 0 L 11 -1 L 12 1 L 12 0 L 13 0" stroke="#000000"
                    stroke-width="0.35" fill="none" />
            </svg>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -4 13 20">
                <path d="M 0 0 L 1 0 L 1 -3 L 4 -3 L 4 0 L 11 0 L 11 -1 L 12 1 L 12 0 L 13 0" stroke="#55c9ff"
                    stroke-width="0.2" fill="none" />
            </svg>
        </div>
		<div class="wave-text">
            Wave
        </div>
		<div class="wave-text-black">
            Wave
        </div>
        <div class="spect">
            <div class="foreground"></div>
            <div class="line"></div>
            <img id="imgSpect" src="" alt="">
        </div>
		<div class="audio-menu">
			<input type="file" id="fileinput"/>
			<div id="song-name">Click the + button to upload</div>
			<div class="buttons">
				<button id="pauseAudio"><i class="fas fa-pause-circle"></i></button>
				<button id="playAudio"><i class="fas fa-play-circle"></i></button>
				<button id="restartAudio"><i class="fas fa-stop-circle"></i></button>
                <button id="slowerAudio"><i class="fas fa-chevron-circle-left"></i></button>
                <button id="fasterAudio"><i class="fas fa-chevron-circle-right"></i></button>
                <button><label for="fileinput"><i class="fas fa-plus-circle"></i></label></button>
			</div>
		</div>
        <div id="scene"></div>
		<div id="waveform"></div>
		<div id="wave-spectrogram"></div>

		<script src="audio.js" type="module"></script>
		<script>
            function drawSVGPaths(parentElement, timeMin, timeMax, timeDelay) {
                let paths = $(parentElement).find('path');

                $.each(paths, function(i) {
                    let totalLength = this.getTotalLength();

                    $(this).css({
                        'stroke-dashoffset': totalLength,
                        'stroke-dasharray': totalLength + ' ' + totalLength
                    });

                    //animate
                    $(this).delay(timeDelay*i).animate({
                        'stroke-dashoffset': 0
                    }, {
                        duration: Math.floor(timeMax) + timeMin,
                        easing: 'easeInOutQuad',
                        complete: function () {
                            $('.wave-text').css({
                                'opacity': 1
                            });
							$('.wave-text-black').css({
                                'opacity': 1
                            })
                        }
                    });
                });
            }
			
            drawSVGPaths($('svg'), 1000, 1500, 50);
        </script>
    </body>
</html>